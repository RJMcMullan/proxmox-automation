#cloud-config
hostname: dev01
fqdn: dev01.internal
manage_etc_hosts: true
user: default
ssh_authorized_keys:
  - ssh-rsa AAAAKEYHEEEEREEEE= user@client
chpasswd:
  expire: False
users:
  - name: rory
    ssh-authorized-keys:
      - ssh-rsa
      - ssh-rsa 
    sudo: ['ALL=(ALL) NOPASSWD:ALL']
    groups: sudo
    shell: /bin/bash
    passwd: D3l1l@h2020
package_upgrade: true
package_reboot_if_required: true
locale: en_GB.UTF-8
timezone: Europe/London
runcmd:
  - sed -i 's/[#]*Port 22/Port 9726/g' /etc/ssh/sshd_config
  - sed -i 's/[#]*PermitRootLogin yes/PermitRootLogin prohibit-password/g' /etc/ssh/sshd_config
  - sed -i 's/[#]*PasswordAuthentication yes/PasswordAuthentication no/g' /etc/ssh/sshd_config
  - sed -i 's/#HostKey \/etc\/ssh\/ssh_host_ed25519_key/HostKey \/etc\/ssh\/ssh_host_ed25519_key/g' /etc/ssh/sshd_config
  - systemctl reload ssh
packages:
  - nano
  - git

